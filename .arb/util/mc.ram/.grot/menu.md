# mc.menu

## Вот пример файла mc.menu:

        A       Сделать дамп текщего файла   
                od -c %f   
   
        B       Редактирование сообщения об ошибке и посылка его root'у   
                vi /tmp/mail.$$   
                mail -s "Midnight Commander bug" root < /tmp/mail.$$   
   
        M       Просмотр почты   
                emacs -f rmail   
   
        N      Просмотр новостей UseNet   
                emacs -f gnus   
   
        H       Вызвать гипертекстовый информационный вьюер   
                info 
   
        J       Рекурсивное копирование текущего каталога в другую панель   
                tar cf - . | (cd %D && tar xvpf -)   
   
        K       Создать файл-описание текущего каталога   
                echo -n "Name of distribution file: "   
                read tar   
                ln -s %d `dirname %d`/$tar   
                cd ..   
                tar cvhf ${tar}.tar $tar   
   
        = f *.tar.gz | f *.tgz & t n   
        X       Декомпрессировать tar файл   
                tar xzvf %f   
                
## Условия
Перед любой записью в меню может стоять условие. Условие должно начинаться с символа '='
в начале строки. Если условие справедливо, то запись, стоящая после него, становится
записью по умолчанию.
Синтаксис условия:
    = <под-условие>
    или
    = <под-условие> | <под-условие> ...
    или
    = <под-условие> & <под-условие> ...
Под-условие может быть одним из следующих:
    f <шаблон>
текущий файл соответствует шаблону?
    F <шаблон>
какой-либо другой файл соответствует шаблону?
    d <шаблон>
текущий каталог соответствует шаблону?
    D <шаблон>
какой-либо другой каталог соответствует шаблону?
    t <тип>
текущий файл соответствует заданному типу?
    T <тип>
какой-либо другой файл соответствует заданному типу?
    ! <под-условие>
отрицание подусловия

## Макроподстановки

Перед выполнением команд, задаваемых пунктами пользовательского меню, 
вызываемых по расширению имени файла, или запускаемых из командной строки ввода, 
вначале выполняются простые макроподстановки.

    %i
Отступ из пробелов, равный текущему положению курсора. Только для меню редактора.
    %y
Тип синтаксиса текущего файла. Только для меню редактора.
    %k
Имя файла блока редактора.
    %e
Имя файла протокола ошибок исполнения сценариев редактора.
    %m
Имя текущего файла меню.
    %f и %p
Текущее имя файла.
    %x
Расширение текущего файла.
    %b
Имя текущего файла без расширения.
    %d
Имя текущего каталога.
    %F
Текущее имя файла в неактивной панели.
    %D
Имя текущего каталога в неактивной панели.
    %t
Отмеченные файлы.
    %T
Файлы, отмеченные в неактивной панели.
    %u и %U
Подобны макросам %t и %T, но дополнительно снимается отметка с файлов. 
Их можно использовать в скриптах, заданных для пункта меню или 
ассоциированных с расширением файла, только один раз, 
поскольку после их использования помеченных файлов не будет.
    %s и %S
Выбранные файлы: помеченные файлы, если такие есть; 
в противном случае файл, имя которого подсвечено.
    %cd
Это специальный макрос, используемый для перехода из 
текущего каталога в каталог, указанный перед этим макросом. 
Используется в основном для обращения к виртуальным файловым системам.
    %view
Этот макрос используется для вызова встроенной программы просмотра. 
Может использоваться как с аргументами, так и без них. Если заданы аргументы, 
они должны быть заключены в фигурные скобки.
Аргументами могут быть: 
ascii - для перевода программы просмотра в режим ascii; 
hex - для перевода программы просмотра в режим hex; 
nroff - для указания программе просмотра, 
что необходимо интерпретировать выделенные (bold) 
и подчеркнутые последовательности nroff; 
unformatted - указывает программе просмотра, 
что не нужно использовать команды nroff для выделения или подчеркивания текста;
    %%
Символ %
    %{любой текст}
Запрос на подстановку. Будет выдаваться окно ввода, а текст из скобок выводится как подсказка. 
Макрос заменяется на текст, введенный пользователем в окне ввода. 
Пользователь может нажать ESC или F10 для того, чтобы отказаться от ввода. 
Этот макрос пока не работает в командной строке.
    %var{ENV-VAR:default}
Этот макрос будет заменяться на значение переменной окружения ENV-VAR, 
если она установлена, в противном случае будет использовано значение default. 
Это подобно конструкции ${VAR-def} в оболочке Борна.

