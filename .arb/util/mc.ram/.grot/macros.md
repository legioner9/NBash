# Macros

Для того, чтобы определить макрос, нажмите Ctrl-R, после чего введите строки команд, которые должны быть выполнены. После завершения ввода команд снова нажмите Ctrl-R и свяжите макрос с какой-нибудь клавишей или комбинацией клавиш, нажав эту клавишу (комбинацию). Макрос будет вызываться нажатием Ctrl-A и назначенной для него клавиши. Макрос можно также вызвать нажатием любой из клавиш Meta (Alt), Ctrl, или Esc и назначенной макросу клавиши, при условии, что данная комбинация не используется для вызова какой-либо другой функции. Макрокоманды после определения записываются в файл .mc/cedit/cooledit.macros в вашем домашнем каталоге. Вы можете удалить макрос удалением соответствующей строки в этом файле.

По клавише F19 (ее нет на обычной клавиатуре IBM PC, так что придется 
пользоваться соответствующим пунктом меню, вызываемым по клавише F9, 
или переназначить клавишу) будет осуществляться форматирование выделенного 
блока кода на языке C, C++ или других. Форматирование управляется файлом 
/usr/share/mc/edit.indent.rc который при первом вызове копируется в 
.mc/cedit/edit.indent.rc в вашем домашнем каталоге.

Вы можете использовать функции поиска и замены scanf для поиска и замены в 
соответствии с шаблонами формата языка C. Вначале посмотрите man-страницы sscanf 
и sprintf, чтобы узнать, что такое шаблоны формата и как они работают. 
Приведем пример: предположим, вы хотите заменить все вхождения блоков текста, 
состоящих из открывающей скобки, трех разделенных запятыми чисел, и закрывающей скобки, 
на блок, состоящий из слова apples, третьего числа исходного блока, слова oranges и потом 
второго числа из исходного блока. Тогда в диалоговом окне, которое появится при вызове 
команды замены (F4), надо задать следующие шаблоны:

     Enter search string
    (%d,%d,%d)
     Enter replace string
    apples %d oranges %d
    Enter replacement argument order
    3,2

Последняя из этих строк говорит, что третье и второе число должны быть подставлены 
на места первого и второго аргументов.

Рекомендуется все же при осуществлении замены пользоваться опцией 
"спрашивать подтверждение" ("Prompt on replace"), потому что программа считает 
совпадениями все случаи, когда число аргументов совпадает с заданным, хотя это 
не всегда означает полное совпадение. Scanf также не обращает внимания на количество символов пробела.

Встроенный редактор обрабатывает символы из второй половины кодовой таблицы (160+). 
Но когда редактируете бинарные файлы, лучше установить опцию Биты символов 
(Display bits) из меню "Настройки" в положение "7 бит", чтобы сохранить формат файла 
(to keep the spacing clean).

Описать все функции встроенного редактора в данной подсказке невозможно. 
Запомните только, что все основные операции можно выполнить через пункты меню, 
которое вызывается нажатием клавиши F9 в окне редактирования. Кроме того, 
можно прочитать man-страницу по команде man mcedit или info mcedit